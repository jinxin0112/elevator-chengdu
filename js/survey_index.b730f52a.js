(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"272":function(e,t,n){},"273":function(e,t,n){e.exports=n.p+"static/images/surBg.png"},"274":function(e,t,n){e.exports=n.p+"static/images/succ.png"},"34":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{"value":!0});var a,r,l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),i=n(4),c=(_interopRequireDefault(i),_interopRequireDefault(n(0))),s=n(9),u=n(6),d=n(38),f=n(44);function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n(272);var m=function(e){function Icon(){return _classCallCheck(this,Icon),_possibleConstructorReturn(this,(Icon.__proto__||Object.getPrototypeOf(Icon)).apply(this,arguments))}return _inherits(Icon,i.Component),o(Icon,[{"key":"render","value":function render(){return c.default.createElement("svg",{"xmlns":"http://www.w3.org/2000/svg","width":"18","height":"18","className":"survey-icon"},c.default.createElement("circle",{"className":"outerCircle","cx":"10","cy":"10","r":"6"}),this.props.checked?c.default.createElement("circle",{"className":"innerCircle","cx":"10","cy":"10","r":"4"}):null)}},{"key":"componentDidShow","value":function componentDidShow(){}}]),Icon}(),p=(0,s.inject)("Store")(a=function(e){function Radio(){var e,t,n;_classCallCheck(this,Radio);for(var a=arguments.length,r=Array(a),l=0;l<a;l++)r[l]=arguments[l];return t=n=_possibleConstructorReturn(this,(e=Radio.__proto__||Object.getPrototypeOf(Radio)).call.apply(e,[this].concat(r))),n.state={"answer":null},n.handleSelect=function(e){var t=n.props,a=t.index,r=(t.onSelectAnswer,t.Store);n.setState({"answer":e}),r.handleSelectAnswer(a,e)},_possibleConstructorReturn(n,t)}return _inherits(Radio,i.Component),o(Radio,[{"key":"render","value":function render(){var e=this,t=this.props.options,n=this.state.answer;return c.default.createElement(d.View,{"className":"radio-container"},t.map(function(t,a){var r=t.label;t.value;return c.default.createElement(d.View,{"className":"radio-item","onClick":function onClick(){e.handleSelect(a)}},c.default.createElement(d.View,{"className":"radio-icon"},c.default.createElement(m,{"checked":a===n})),c.default.createElement(d.View,{"className":"radio-label"},r))}))}},{"key":"componentDidShow","value":function componentDidShow(){}}]),Radio}())||a,h=(0,s.inject)("Store")(r=(0,s.observer)(r=function(e){function Survey(){var e,t,n;_classCallCheck(this,Survey);for(var a=arguments.length,r=Array(a),l=0;l<a;l++)r[l]=arguments[l];return t=n=_possibleConstructorReturn(this,(e=Survey.__proto__||Object.getPrototypeOf(Survey)).call.apply(e,[this].concat(r))),n.state={"isOpened":!1,"isResOpened":!1,"isFaildOpened":!1,"address":"","mobile":"","name":""},n.handleFormChange=function(e,t){n.setState(function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{"value":n,"enumerable":!0,"configurable":!0,"writable":!0}):e[t]=n,e}({},e,t))},n.toggleModal=function(e){n.setState({"isOpened":e})},n.handleSubmit=function(){console.log({"name":name,"mobile":mobile,"address":address})},n.handleBlur=function(){console.log("handleBlur"),setTimeout(function(){var e=document.documentElement.scrollTop||document.body.scrollTop||0;console.log("scrollHeight",e),window.scrollTo(0,Math.max(e-1,0))},100)},_possibleConstructorReturn(n,t)}return _inherits(Survey,i.Component),o(Survey,[{"key":"componentDidMount","value":function componentDidMount(){this.props.Store.getCurrentSurvey()}},{"key":"render","value":function render(){var e=this,t=this.props.Store,a=t.currentSurvey,r=t.canSubmit,o=this.state,i=o.isOpened,s=o.address,m=o.mobile,h=o.name,b=o.isResOpened,y=o.isFaildOpened;return c.default.createElement(d.ScrollView,{"className":"info-scroll-view","scrollY":!0},0===a.length?c.default.createElement(d.View,null,"加载中..."):c.default.createElement(d.View,null,c.default.createElement(d.Image,{"src":n(273),"className":"survey-bg"}),(0,u.toJS)(a).map(function(e,t){var n=e.question,a=e.id,r=(0,u.toJS)(e),o=["A","B","C","D"],i=Object.keys(r).reduce(function(e,t){return/choice/.test(t)&&(e=[].concat(function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e),[{"label":r[t],"value":a}])),e},[]).map(function(e,t){return l({},e,{"label":o[t]+"、"+e.label})});return c.default.createElement(d.View,{"className":"survey-card","key":t},0===t?c.default.createElement(d.View,{"className":"title"},"正确回答问题提交后,可以参加本微信公众号组织的抽奖活动哦,快来试试吧。"):null,c.default.createElement(d.View,{"className":"survey-question"},t+1+"、"+n),c.default.createElement(d.View,{"className":"survey-answer"},c.default.createElement(p,{"options":i,"index":a})))}),c.default.createElement(f.AtButton,{"type":"primary","className":"survey-submit","disabled":!r,"onClick":function onClick(){t.submit(function(){e.toggleModal(!0)},function(){e.setState({"isFaildOpened":!0})})}},"提交"),c.default.createElement(f.AtModal,{"isOpened":i},c.default.createElement(f.AtModalHeader,null,"恭喜您获得抽奖资格，请完善个人信息，等待主办方跟您联系。"),c.default.createElement(f.AtModalContent,null,c.default.createElement(f.AtInput,{"name":"name","title":"姓名：","type":"text","placeholder":"请输入姓名","value":h,"onChange":this.handleFormChange.bind(null,"name"),"onBlur":this.handleBlur}),c.default.createElement(f.AtInput,{"name":"mobile","title":"手机号：","type":"number","placeholder":"请输入手机号","value":m,"onChange":this.handleFormChange.bind(null,"mobile"),"onBlur":this.handleBlur}),c.default.createElement(f.AtInput,{"name":"address","title":"地址：","type":"text","placeholder":"请输入地址","value":s,"onChange":this.handleFormChange.bind(null,"address"),"onBlur":this.handleBlur})),c.default.createElement(f.AtModalAction,null," ",c.default.createElement(d.Button,{"onClick":function onClick(){e.toggleModal(!1)}},"关闭")," ",c.default.createElement(d.Button,{"onClick":function onClick(){var n=e.state,a=n.name,r=n.mobile,l=n.address;a&&r&&l&&t.submitUser({"name":a,"mobile":r,"address":l},function(){e.toggleModal(!1),e.setState({"isResOpened":!0})})}},"提交")," ")),c.default.createElement(f.AtModal,{"isOpened":b,"onClose":function onClose(){}},c.default.createElement(f.AtModalHeader,{"className":"res"},c.default.createElement(d.Image,{"src":n(274)}),c.default.createElement(d.View,{"className":"succTip"},"提交成功"),c.default.createElement(d.View,{"className":"subSuccTip"},"感谢您的持续关注"),c.default.createElement("span",{"className":"closebtn","onClick":function onClick(){e.setState({"isResOpened":!1})}},"x"))),c.default.createElement(f.AtModal,{"isOpened":y},c.default.createElement(f.AtModalHeader,{"className":"res faild"},c.default.createElement(d.View,{"className":"succTip"},"很遗憾，您的答题不理想，请再接再厉!")),c.default.createElement(f.AtModalAction,null,c.default.createElement(d.Button,{"onClick":function onClick(){e.setState({"isFaildOpened":!1})}},"关闭")))))}},{"key":"componentDidShow","value":function componentDidShow(){}}]),Survey}())||r)||r;t.default=h},"38":function(e,t,n){e.exports=n(3)(18)},"39":function(e,t,n){e.exports=n(3)(19)}}]);